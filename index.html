<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>üç∫ Drinking Roulette</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Nunito:wght@700;800;900&display=swap');

:root {
  --gold:#f5c518; --gold2:#c9960a;
  --dark:#0d0d14; --card:#16161f;
  --border:rgba(245,197,24,0.25);
}
* { margin:0; padding:0; box-sizing:border-box; -webkit-tap-highlight-color:transparent; }

body {
  background:var(--dark); min-height:100vh;
  display:flex; flex-direction:column; align-items:center;
  font-family:'Nunito',sans-serif; overflow-x:hidden; padding-bottom:40px;
}
body::before {
  content:''; position:fixed; inset:0;
  background:radial-gradient(ellipse at 50% 0%,rgba(245,197,24,0.07) 0%,transparent 70%);
  pointer-events:none; z-index:0;
}

/* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */
.header { width:100%; padding:24px 20px 8px; text-align:center; position:relative; z-index:1; }
.title {
  font-family:'Bebas Neue',sans-serif; font-size:2.9rem; letter-spacing:4px;
  color:var(--gold); text-shadow:0 0 28px rgba(245,197,24,0.4),0 2px 6px rgba(0,0,0,0.9);
  line-height:1;
}
.subtitle { font-size:0.82rem; letter-spacing:6px; text-transform:uppercase; color:rgba(255,255,255,0.28); margin-top:3px; }

/* ‚îÄ‚îÄ SETUP ‚îÄ‚îÄ */
#setup-screen { width:100%; max-width:400px; padding:14px 18px; position:relative; z-index:1; }
.setup-card {
  background:var(--card); border:1px solid var(--border);
  border-radius:24px; padding:26px 20px;
  box-shadow:0 20px 60px rgba(0,0,0,0.6),inset 0 1px 0 rgba(245,197,24,0.08);
}
.setup-label { font-size:1.15rem; font-weight:900; color:rgba(255,255,255,0.9); text-align:center; margin-bottom:4px; }
.setup-sub { font-size:0.88rem; color:rgba(255,255,255,0.32); text-align:center; margin-bottom:20px; }

.slots-row { display:flex; gap:8px; justify-content:center; margin-bottom:22px; }
.slot-btn {
  width:46px; height:46px;
  background:rgba(255,255,255,0.05); border:2px solid rgba(255,255,255,0.1);
  border-radius:13px; color:rgba(255,255,255,0.5);
  font-size:1.4rem; font-weight:900; font-family:'Bebas Neue',sans-serif;
  cursor:pointer; transition:all 0.18s;
  display:flex; align-items:center; justify-content:center;
}
.slot-btn.active {
  background:linear-gradient(145deg,#e8a800,#f5c518); border-color:var(--gold); color:#0d0d14;
  box-shadow:0 0 18px rgba(245,197,24,0.45); transform:scale(1.08);
}
.slot-btn:active { transform:scale(0.93); }

/* Drink amounts legend */
.legend { margin-bottom:20px; }
.legend-title { font-size:0.85rem; font-weight:800; color:rgba(255,255,255,0.4); text-align:center; letter-spacing:2px; margin-bottom:10px; }
.legend-row { display:flex; justify-content:center; gap:10px; }
.legend-item {
  flex:1; max-width:110px;
  background:rgba(255,255,255,0.04); border:1px solid rgba(255,255,255,0.08);
  border-radius:12px; padding:10px 6px;
  display:flex; flex-direction:column; align-items:center; gap:4px;
}
.legend-icon { font-size:1.5rem; }
.legend-label { font-size:0.78rem; font-weight:800; color:rgba(255,255,255,0.6); text-align:center; }

.zero-badge {
  display:flex; align-items:center; gap:10px;
  background:rgba(231,76,60,0.1); border:1px solid rgba(231,76,60,0.28);
  border-radius:13px; padding:12px 14px; margin-bottom:20px;
}
.zero-badge .zi { font-size:1.8rem; }
.zero-badge strong { font-size:1rem; color:#e74c3c; display:block; }
.zero-badge span { font-size:0.82rem; color:rgba(255,255,255,0.38); }

.start-btn {
  width:100%; padding:16px;
  background:linear-gradient(135deg,var(--gold2),var(--gold)); border:none; border-radius:18px;
  color:#0d0d14; font-size:1.45rem; font-weight:900; font-family:'Nunito',sans-serif;
  cursor:pointer; letter-spacing:1px; box-shadow:0 8px 28px rgba(245,197,24,0.28);
  transition:all 0.18s;
}
.start-btn:active { transform:scale(0.97); }

/* ‚îÄ‚îÄ GAME ‚îÄ‚îÄ */
#game-screen {
  display:none; width:100%; max-width:420px;
  padding:4px 14px; position:relative; z-index:1;
  flex-direction:column; align-items:center;
}

.wheel-outer { position:relative; width:min(88vw,350px); margin:0 auto; }

/* Needle above wheel */
.needle-wrap {
  position:absolute; top:-28px; left:50%;
  transform:translateX(-50%); z-index:30; pointer-events:none;
  display:flex; flex-direction:column; align-items:center;
  filter:drop-shadow(0 4px 10px rgba(0,0,0,0.8));
}
.needle-cap {
  width:24px; height:24px; border-radius:50%;
  background:radial-gradient(circle at 38% 35%,#555,#111);
  border:3px solid rgba(255,255,255,0.85);
  box-shadow:0 0 12px rgba(0,0,0,0.9); z-index:2; flex-shrink:0;
}
.needle-body {
  width:0; height:0;
  border-left:9px solid transparent; border-right:9px solid transparent;
  border-top:48px solid #111; margin-top:-2px;
}

.wheel-container { position:relative; width:100%; aspect-ratio:1; }

.wheel-ring {
  position:absolute; inset:-5px; border-radius:50%;
  background:conic-gradient(#f5c518,#c9960a,#f5c518,#c9960a,#f5c518);
  animation:ringRot 10s linear infinite; z-index:0; opacity:0.7;
}
@keyframes ringRot { to { transform:rotate(360deg); } }

#wheel-canvas {
  position:relative; z-index:1; width:100%; height:100%;
  border-radius:50%; display:block;
  box-shadow:0 0 30px rgba(245,197,24,0.12),0 12px 40px rgba(0,0,0,0.7);
}

.center-btn {
  position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
  width:64px; height:64px; border-radius:50%;
  background:radial-gradient(circle at 35% 30%,#2a2a38,#0d0d14);
  border:3px solid var(--gold); box-shadow:0 0 18px rgba(245,197,24,0.45);
  display:flex; align-items:center; justify-content:center;
  cursor:pointer; z-index:20; transition:all 0.15s; user-select:none;
}
.center-btn:active { transform:translate(-50%,-50%) scale(0.9); }
.center-btn.spin-anim { animation:cPulse 0.7s ease-in-out infinite; }
@keyframes cPulse {
  0%,100%{box-shadow:0 0 18px rgba(245,197,24,0.45)}
  50%{box-shadow:0 0 40px rgba(245,197,24,0.95)}
}

.tap-hint {
  text-align:center; margin-top:14px;
  color:rgba(245,197,24,0.45); font-size:0.95rem; letter-spacing:2px; font-weight:800;
  animation:hBlink 1.6s ease-in-out infinite;
}
@keyframes hBlink { 0%,100%{opacity:0.35} 50%{opacity:1} }

/* ‚îÄ‚îÄ RESULT ‚îÄ‚îÄ */
#result-panel {
  width:100%; margin-top:14px; text-align:center; min-height:80px;
  display:flex; flex-direction:column; align-items:center; justify-content:center; gap:8px;
}
.res-lbl { font-size:0.95rem; font-weight:700; letter-spacing:3px; color:rgba(255,255,255,0.4); animation:fadeUp 0.35s ease both; }
.res-player {
  font-family:'Bebas Neue',sans-serif; font-size:5rem; line-height:1;
  animation:popIn 0.45s cubic-bezier(0.34,1.56,0.64,1) 0.05s both;
}
.res-amount {
  font-size:1.4rem; font-weight:900; color:#fff;
  animation:popIn 0.45s cubic-bezier(0.34,1.56,0.64,1) 0.12s both;
}
.res-drink-icon {
  font-size:2.8rem;
  animation:popIn 0.45s cubic-bezier(0.34,1.56,0.64,1) 0.2s both;
}
@keyframes popIn { from{transform:scale(0.2);opacity:0} to{transform:scale(1);opacity:1} }
@keyframes fadeUp { from{transform:translateY(8px);opacity:0} to{transform:translateY(0);opacity:1} }

.spin-again-btn {
  margin-top:8px; padding:13px 40px;
  background:transparent; border:2px solid var(--gold); border-radius:50px;
  color:var(--gold); font-size:1.15rem; font-weight:900; font-family:'Nunito',sans-serif;
  cursor:pointer; letter-spacing:1px; transition:all 0.18s;
}
.spin-again-btn:active { background:rgba(245,197,24,0.1); transform:scale(0.97); }

.back-btn {
  padding:9px 20px; background:transparent;
  border:1px solid rgba(255,255,255,0.14); border-radius:50px;
  color:rgba(255,255,255,0.38); font-size:0.9rem; font-family:'Nunito',sans-serif;
  cursor:pointer; margin-top:8px; transition:all 0.18s;
}
.back-btn:active { color:rgba(255,255,255,0.75); }

/* Confetti */
.cf { position:fixed; pointer-events:none; z-index:999; animation:cfFall linear forwards; }
@keyframes cfFall {
  0%  { transform:translateY(-10px) rotate(0deg); opacity:1; }
  100%{ transform:translateY(105vh) rotate(720deg); opacity:0; }
}
</style>
</head>
<body>

<div class="header">
  <div class="title">üç∫ Drinking Roulette</div>
  <div class="subtitle">Spin &bull; Drink &bull; Suffer</div>
</div>

<!-- SETUP -->
<div id="setup-screen">
  <div class="setup-card">
    <div class="setup-label">How many players?</div>
    <div class="setup-sub">Each player gets 3 slots on the wheel</div>

    <div class="slots-row">
      <button class="slot-btn" data-n="2" onclick="selectSlots(2)">2</button>
      <button class="slot-btn" data-n="3" onclick="selectSlots(3)">3</button>
      <button class="slot-btn active" data-n="4" onclick="selectSlots(4)">4</button>
      <button class="slot-btn" data-n="5" onclick="selectSlots(5)">5</button>
      <button class="slot-btn" data-n="6" onclick="selectSlots(6)">6</button>
      <button class="slot-btn" data-n="7" onclick="selectSlots(7)">7</button>
    </div>

    <div class="legend">
      <div class="legend-title">DRINK AMOUNTS</div>
      <div class="legend-row">
        <div class="legend-item">
          <div class="legend-icon">üç∫</div>
          <div class="legend-label">FULL<br>GLASS</div>
        </div>
        <div class="legend-item">
          <div class="legend-icon">ü•É</div>
          <div class="legend-label">HALF<br>GLASS</div>
        </div>
        <div class="legend-item">
          <div class="legend-icon">üíß</div>
          <div class="legend-label">JUST A<br>SIP</div>
        </div>
      </div>
    </div>

    <div class="zero-badge">
      <div class="zi">üî¥</div>
      <div>
        <strong>Slot 0 = EVERYONE DRINKS!</strong>
        <span>No one escapes this one üçª</span>
      </div>
    </div>

    <button class="start-btn" onclick="startGame()">üé≤ Start Game!</button>
  </div>
</div>

<!-- GAME -->
<div id="game-screen">
  <div class="wheel-outer">
    <div class="needle-wrap">
      <div class="needle-cap"></div>
      <div class="needle-body"></div>
    </div>
    <div class="wheel-container">
      <div class="wheel-ring"></div>
      <canvas id="wheel-canvas"></canvas>
      <div class="center-btn" id="center-btn" onclick="spinWheel()">
        <svg id="center-icon" width="28" height="28" viewBox="0 0 24 24" fill="#f5c518">
          <polygon points="7,3 21,12 7,21"/>
        </svg>
      </div>
    </div>
  </div>

  <div class="tap-hint" id="tap-hint">TAP CENTER TO SPIN</div>
  <div id="result-panel"></div>
  <button class="back-btn" onclick="backToSetup()">‚öô Change Players</button>
</div>

<script>
// 7 distinct player colors
const PLAYER_COLORS = [
  '#4cc9f0', // 1 cyan
  '#06d6a0', // 2 green
  '#f5c518', // 3 yellow
  '#b5179e', // 4 purple
  '#fb8500', // 5 orange
  '#3a86ff', // 6 blue
  '#ff006e', // 7 pink
];

// Amount config
const AMOUNTS = ['full', 'half', 'sip'];
const AMOUNT_ICON = { full:'üç∫', half:'ü•É', sip:'üíß' };
const AMOUNT_DOTS = { full:'‚ñ†‚ñ†‚ñ†', half:'‚ñ†‚ñ†‚ñ°', sip:'‚ñ†‚ñ°‚ñ°' };  // small bar indicators
const AMOUNT_TEXT = { full:'FULL GLASS', half:'HALF GLASS', sip:'JUST A SIP' };
const AMOUNT_MSG  = { full:'BOTTOMS UP! üç∫', half:'DRINK HALF! ü•É', sip:"YOU'RE LUCKY ‚Äî SIP! üíß" };

let numPlayers = 4;
let slotData   = [];   // [{label, color, weight, amount}]
let cumAngles  = [];   // cumulative angle in wheel-local frame (0..2PI)
let baseUnit   = 0;    // radians per weight-unit
let totalWeight = 0;

let currentAngle = 0;
let spinning = false, animId = null;
let canvas, ctx, size;

function selectSlots(n) {
  numPlayers = n;
  document.querySelectorAll('.slot-btn').forEach(b =>
    b.classList.toggle('active', parseInt(b.dataset.n) === n)
  );
}

// Fisher-Yates shuffle
function shuffle(arr) {
  const a = [...arr];
  for (let i = a.length - 1; i > 0; i--) {
    const j = 0|Math.random()*(i+1);
    [a[i],a[j]] = [a[j],a[i]];
  }
  return a;
}

function buildSlots() {
  /*
    GUARANTEED NO ADJACENCY:
    slot index i ‚Üí playerOrder[i % N]
    ‚Üí every consecutive pair of slots always belongs to different players.
    
    playerOrder = shuffle([1..N]) so the starting sequence is random each game.
    
    Amounts: each player gets exactly full/half/sip once,
    assigned to their 1st/2nd/3rd appearance in random order per player.
  */

  // Random order of players around the wheel
  const playerOrder = shuffle(Array.from({length: numPlayers}, (_, i) => i + 1));

  // Randomly assign which occurrence of each player gets which amount
  const playerAmounts = {};
  playerOrder.forEach(p => { playerAmounts[p] = shuffle([...AMOUNTS]); });

  // Track how many times each player has appeared so far
  const occurrence = {};
  playerOrder.forEach(p => { occurrence[p] = 0; });

  const playerSlots = [];
  for (let i = 0; i < numPlayers * 3; i++) {
    const p   = playerOrder[i % numPlayers];
    const occ = occurrence[p];
    playerSlots.push({
      label : String(p),
      color : PLAYER_COLORS[p - 1],
      weight: 1,
      amount: playerAmounts[p][occ]
    });
    occurrence[p]++;
  }

  slotData = [
    { label:'0', color:'#e74c3c', weight:2, amount:'all' },
    ...playerSlots
  ];

  totalWeight = 2 + numPlayers * 3;
  baseUnit    = (Math.PI * 2) / totalWeight;

  cumAngles = [];
  let cum = 0;
  slotData.forEach(s => { cumAngles.push(cum); cum += s.weight * baseUnit; });
}

function startGame() {
  buildSlots();
  document.getElementById('setup-screen').style.display = 'none';
  document.getElementById('game-screen').style.display = 'flex';
  document.getElementById('result-panel').innerHTML = '';
  document.getElementById('tap-hint').style.display = 'block';
  document.getElementById('tap-hint').textContent = 'TAP CENTER TO SPIN';
  document.getElementById('center-icon').innerHTML = '<polygon points="7,3 21,12 7,21"/>';

  canvas = document.getElementById('wheel-canvas');
  size   = canvas.parentElement.offsetWidth;
  canvas.width = canvas.height = size;
  ctx = canvas.getContext('2d');
  currentAngle = 0;
  drawWheel();
}

/* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ DRAW WHEEL ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
function drawWheel() {
  const cx = size/2, cy = size/2, r = size/2 - 3;
  ctx.clearRect(0,0,size,size);

  // Dynamic font sizes based on total slots
  const total = slotData.length;
  const numSize  = total <= 10 ? size*0.088 : total <= 16 ? size*0.072 : size*0.058;
  const dotSize  = total <= 10 ? size*0.038 : total <= 16 ? size*0.032 : size*0.026;

  slotData.forEach((s, i) => {
    const arcAngle = s.weight * baseUnit;
    const sa  = currentAngle + cumAngles[i] - Math.PI/2;
    const ea  = sa + arcAngle;
    const mid = sa + arcAngle/2;

    // ‚îÄ‚îÄ Slice ‚îÄ‚îÄ
    ctx.beginPath();
    ctx.moveTo(cx, cy);
    ctx.arc(cx, cy, r, sa, ea);
    ctx.closePath();
    ctx.fillStyle = s.color;
    ctx.fill();
    ctx.strokeStyle = 'rgba(0,0,0,0.4)';
    ctx.lineWidth = 2;
    ctx.stroke();

    // ‚îÄ‚îÄ Text: rotate so outward direction = +x ‚îÄ‚îÄ
    ctx.save();
    ctx.translate(cx, cy);
    ctx.rotate(mid);

    // Player number near outer edge
    const fontSize = s.weight === 2
      ? Math.max(28, size*0.105)   // slot 0 is wider, bigger font
      : Math.max(14, numSize);

    ctx.font = `900 ${fontSize}px "Bebas Neue", sans-serif`;
    ctx.fillStyle = '#fff';
    ctx.shadowColor = 'rgba(0,0,0,0.85)';
    ctx.shadowBlur  = 6;
    ctx.textAlign   = 'center';
    ctx.textBaseline = 'middle';

    // Position: near outer edge ‚Äî r*0.75 from center
    const numR = r * 0.75;
    ctx.fillText(s.label, numR, 0);

    // ‚îÄ‚îÄ Amount indicator (dots + small icon text) ‚îÄ‚îÄ
    if (s.amount !== 'all') {
      const ds = Math.max(8, dotSize);
      ctx.font = `800 ${ds}px "Bebas Neue", monospace`;
      ctx.fillStyle = 'rgba(255,255,255,0.75)';
      ctx.shadowBlur = 3;
      // Draw dots closer to center
      const dotR = r * 0.47;
      ctx.fillText(AMOUNT_DOTS[s.amount], dotR, 0);
    } else {
      // Slot 0 sub-label
      const subSize = Math.max(8, size*0.032);
      ctx.font = `800 ${subSize}px Nunito, sans-serif`;
      ctx.fillStyle = 'rgba(255,255,255,0.75)';
      ctx.shadowBlur = 3;
      ctx.fillText('ALL DRINK', r*0.47, 0);
    }

    ctx.restore();
  });

  // Gold outer ring
  ctx.beginPath();
  ctx.arc(cx, cy, r, 0, Math.PI*2);
  ctx.strokeStyle = 'rgba(245,197,24,0.95)';
  ctx.lineWidth = 5;
  ctx.stroke();

  // Center cap (button sits on top via HTML)
  ctx.beginPath();
  ctx.arc(cx, cy, 32, 0, Math.PI*2);
  ctx.fillStyle = '#0d0d14';
  ctx.fill();
  ctx.strokeStyle = 'rgba(245,197,24,0.55)';
  ctx.lineWidth = 2;
  ctx.stroke();
}

/* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ WINNER ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
function getWinner() {
  let needle = ((-currentAngle % (Math.PI*2)) + Math.PI*2) % (Math.PI*2);
  for (let i = 0; i < slotData.length; i++) {
    const end = cumAngles[i] + slotData[i].weight * baseUnit;
    if (needle >= cumAngles[i] && needle < end) return i;
  }
  return slotData.length - 1;
}

/* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ SPIN ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
function spinWheel() {
  if (spinning) return;
  spinning = true;

  const btn  = document.getElementById('center-btn');
  const icon = document.getElementById('center-icon');
  btn.classList.add('spin-anim');
  icon.innerHTML = '<rect x="5" y="3" width="4.5" height="18" rx="1"/><rect x="14.5" y="3" width="4.5" height="18" rx="1"/>';
  document.getElementById('tap-hint').style.display = 'none';
  document.getElementById('result-panel').innerHTML = '';

  const totalTime = 9500 + Math.random()*1000;
  const totalRot  = (10 + Math.random()*5) * Math.PI*2;
  let t0 = null;

  function ease(t) { return 1 - Math.pow(1-t, 3.2); }

  function frame(ts) {
    if (!t0) t0 = ts;
    const t = Math.min((ts - t0)/totalTime, 1);
    currentAngle = ease(t) * totalRot;
    drawWheel();
    if (t < 1) {
      animId = requestAnimationFrame(frame);
    } else {
      spinning = false;
      btn.classList.remove('spin-anim');
      icon.innerHTML = '<polygon points="7,3 21,12 7,21"/>';
      document.getElementById('tap-hint').style.display = 'block';
      document.getElementById('tap-hint').textContent = 'TAP TO SPIN AGAIN';
      showResult(getWinner());
    }
  }
  animId = requestAnimationFrame(frame);
}

/* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ RESULT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
function showResult(idx) {
  const panel  = document.getElementById('result-panel');
  const s      = slotData[idx];
  const isZero = s.label === '0';

  if (isZero) {
    panel.innerHTML = `
      <div class="res-lbl">üí• EVERYONE LOSES...</div>
      <div class="res-player" style="color:#e74c3c;text-shadow:0 0 30px #e74c3c88;font-size:4.5rem">SLOT 0</div>
      <div class="res-amount">üç∫üç∫ ALL PLAYERS DRINK! üç∫üç∫</div>
      <button class="spin-again-btn" onclick="spinWheel()">üîÑ Spin Again</button>`;
    confetti('#e74c3c', 60);
  } else {
    const icon  = AMOUNT_ICON[s.amount];
    const atxt  = AMOUNT_TEXT[s.amount];
    const amsg  = AMOUNT_MSG[s.amount];
    panel.innerHTML = `
      <div class="res-lbl">üéØ PLAYER</div>
      <div class="res-player" style="color:${s.color};text-shadow:0 0 28px ${s.color}88">${s.label}</div>
      <div class="res-drink-icon">${icon}</div>
      <div class="res-amount" style="color:${s.color}">${atxt}</div>
      <div style="font-size:1rem;color:rgba(255,255,255,0.55);font-weight:700">${amsg}</div>
      <button class="spin-again-btn" onclick="spinWheel()">üîÑ Spin Again</button>`;
    confetti(s.color, 35);
  }
}

function confetti(c, n) {
  const pal = [c,'#f5c518','#fff'];
  for (let i = 0; i < n; i++) {
    const el = document.createElement('div');
    el.className = 'cf';
    const sz = 6 + Math.random()*9;
    el.style.cssText = `left:${Math.random()*100}vw;top:-12px;
      background:${pal[0|Math.random()*pal.length]};
      width:${sz}px;height:${sz}px;
      border-radius:${Math.random()>.5?'50%':'3px'};
      animation-duration:${1.4+Math.random()*2}s;
      animation-delay:${Math.random()*0.4}s;`;
    document.body.appendChild(el);
    setTimeout(()=>el.remove(), 4200);
  }
}

function backToSetup() {
  if (animId) cancelAnimationFrame(animId);
  spinning = false;
  document.getElementById('game-screen').style.display = 'none';
  document.getElementById('setup-screen').style.display = 'block';
}

selectSlots(4);
</script>
</body>
</html>
